<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å„¿ç«¥æ•°å­¦ç»ƒä¹ </title>
    <script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script>
    <script>LA.init({ id: "3NJ6qob9tWWEj2g3", ck: "3NJ6qob9tWWEj2g3", autoTrack: true, hashMode: true })</script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#4285F4',
                        secondary: '#EA4335',
                        accent: '#FBBC05',
                        success: '#34A853',
                        light: '#F5F7FA',
                        dark: '#202124',
                    },
                    fontFamily: {
                        comic: ['"Comic Sans MS"', '"Marker Felt"', 'cursive'],
                    },
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer utilities {
            .content-auto {
                content-visibility: auto;
            }
            .btn-hover {
                @apply transform transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95;
            }
            .bounce-in {
                animation: bounce-in 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            }
            .shake {
                animation: shake 0.5s cubic-bezier(.36,.07,.19,.97) both;
            }
            .float {
                animation: float 3s ease-in-out infinite;
            }
            @keyframes bounce-in {
                0% { transform: scale(0); opacity: 0; }
                60% { transform: scale(1.1); opacity: 1; }
                100% { transform: scale(1); }
            }
            @keyframes shake {
                10%, 90% { transform: translateX(-1px); }
                20%, 80% { transform: translateX(2px); }
                30%, 50%, 70% { transform: translateX(-4px); }
                40%, 60% { transform: translateX(4px); }
            }
            @keyframes float {
                0% { transform: translateY(0px); }
                50% { transform: translateY(-10px); }
                100% { transform: translateY(0px); }
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-screen font-comic text-dark">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- é¡¶éƒ¨å¾—åˆ†åŒºåŸŸ -->
        <header class="mb-8 bg-white rounded-2xl shadow-lg p-4 flex justify-between items-center">
            <div class="flex items-center">
                <i class="fa fa-star text-accent text-3xl mr-2 float"></i>
                <h1 class="text-2xl md:text-3xl font-bold text-primary">æ•°å­¦å°å¤©æ‰</h1>
            </div>
            <div class="bg-light rounded-full px-6 py-2 flex items-center">
                <i class="fa fa-trophy text-secondary text-2xl mr-2"></i>
                <span class="text-xl md:text-2xl font-bold">å¾—åˆ†: <span id="score" class="text-success">0</span></span>
            </div>
        </header>

        <!-- ä¸»è¦å†…å®¹åŒºåŸŸ -->
        <main class="bg-white rounded-3xl shadow-xl p-6 md:p-10 mb-8">
            <!-- è£…é¥°å…ƒç´  -->
            <div class="absolute -top-6 -right-6 md:-top-10 md:-right-10 text-6xl md:text-8xl text-primary/20">
                <i class="fa fa-calculator"></i>
            </div>
            <div class="absolute -bottom-6 -left-6 md:-bottom-10 md:-left-10 text-6xl md:text-8xl text-secondary/20">
                <i class="fa fa-pencil"></i>
            </div>

            <!-- é¢˜ç›®åŒºåŸŸ -->
            <div id="question-container" class="text-center mb-10">
                <p class="text-xl text-gray-600 mb-4">æ¥åšä¸€é“æ•°å­¦é¢˜å§ï¼</p>
                <div class="bg-light rounded-2xl p-6 md:p-10 inline-block">
                    <p id="question" class="text-5xl md:text-7xl font-bold mb-6 bounce-in">3 + 5 = ?</p>
                    <div class="flex flex-col items-center">
                        <input type="number" id="answer" placeholder="è¾“å…¥ä½ çš„ç­”æ¡ˆ" 
                            class="w-full max-w-xs text-3xl md:text-4xl text-center border-4 border-primary/30 rounded-xl p-3 focus:outline-none focus:border-primary transition-all duration-300">
                        <p id="feedback" class="mt-4 text-xl font-bold hidden"></p>
                    </div>
                </div>
            </div>

            <!-- æŒ‰é’®åŒºåŸŸ -->
            <div class="flex justify-center space-x-4">
                <button id="submit-btn" class="bg-success text-white text-xl md:text-2xl font-bold py-4 px-10 rounded-full shadow btn-hover">
                    <i class="fa fa-check mr-2"></i>æäº¤ç­”æ¡ˆ
                </button>
                <button id="next-btn" class="bg-primary text-white text-xl md:text-2xl font-bold py-4 px-10 rounded-full shadow btn-hover hidden">
                    <i class="fa fa-arrow-right mr-2"></i>ä¸‹ä¸€é¢˜
                </button>
            </div>
        </main>

        <!-- åº•éƒ¨ä¿¡æ¯ -->
        <footer class="text-center text-gray-500 text-sm">
            <p>æ¯æ¬¡ç­”å¯¹éƒ½ä¼šè·å¾—ä¸€é¢—æ˜Ÿæ˜Ÿå“¦ï¼ç»§ç»­åŠ æ²¹ï¼</p>
        </footer>
    </div>

    <script>
        // åˆå§‹åŒ–å˜é‡
        let score = 0;
        let currentAnswer = null;
        const operators = ['+', '-', '*', '/'];
        const maxNumber = 20; // æœ€å¤§æ•°å­—èŒƒå›´

        // DOM å…ƒç´ 
        const questionEl = document.getElementById('question');
        const answerEl = document.getElementById('answer');
        const feedbackEl = document.getElementById('feedback');
        const submitBtn = document.getElementById('submit-btn');
        const nextBtn = document.getElementById('next-btn');
        const scoreEl = document.getElementById('score');

        // ç”Ÿæˆæ–°é¢˜ç›®
        function generateQuestion() {
            // éšæœºé€‰æ‹©è¿ç®—ç¬¦
            const operator = operators[Math.floor(Math.random() * operators.length)];
            
            // æ ¹æ®è¿ç®—ç¬¦ç¡®å®šæ•°å­—èŒƒå›´
            let num1, num2;
            if (operator === '/') {
                // é™¤æ³•ç¡®ä¿ç»“æœæ˜¯æ•´æ•°
                num2 = Math.floor(Math.random() * 9) + 1; // 1-9
                const quotient = Math.floor(Math.random() * 10) + 1; // 1-10
                num1 = num2 * quotient;
            } else if (operator === '-') {
                // å‡æ³•ç¡®ä¿ç»“æœä¸ºæ­£æ•°
                num1 = Math.floor(Math.random() * maxNumber) + 1;
                num2 = Math.floor(Math.random() * num1) + 1;
            } else {
                num1 = Math.floor(Math.random() * maxNumber) + 1;
                num2 = Math.floor(Math.random() * maxNumber) + 1;
                
                // ä¹˜æ³•é™åˆ¶æ•°å­—å¤§å°
                if (operator === '*') {
                    num1 = Math.floor(Math.random() * 10) + 1; // 1-10
                    num2 = Math.floor(Math.random() * 10) + 1; // 1-10
                }
            }

            // è®¡ç®—æ­£ç¡®ç­”æ¡ˆ
            switch (operator) {
                case '+':
                    currentAnswer = num1 + num2;
                    break;
                case '-':
                    currentAnswer = num1 - num2;
                    break;
                case '*':
                    currentAnswer = num1 * num2;
                    break;
                case '/':
                    currentAnswer = num1 / num2;
                    break;
            }

            // æ˜¾ç¤ºé¢˜ç›®
            questionEl.textContent = `${num1} ${operator} ${num2} = ?`;
            questionEl.classList.remove('bounce-in');
            void questionEl.offsetWidth; // è§¦å‘é‡ç»˜
            questionEl.classList.add('bounce-in');
            
            // æ¸…ç©ºç­”æ¡ˆè¾“å…¥æ¡†å¹¶èšç„¦
            answerEl.value = '';
            answerEl.focus();
            
            // éšè—åé¦ˆå’Œä¸‹ä¸€é¢˜æŒ‰é’®
            feedbackEl.classList.add('hidden');
            submitBtn.classList.remove('hidden');
            nextBtn.classList.add('hidden');
        }

        // æ£€æŸ¥ç­”æ¡ˆ
        function checkAnswer() {
            const userAnswer = parseFloat(answerEl.value);
            
            // æ£€æŸ¥è¾“å…¥æ˜¯å¦æœ‰æ•ˆ
            if (isNaN(userAnswer)) {
                feedbackEl.textContent = 'è¯·è¾“å…¥ä¸€ä¸ªæœ‰æ•ˆçš„æ•°å­—ï¼';
                feedbackEl.className = 'mt-4 text-xl font-bold text-secondary shake';
                feedbackEl.classList.remove('hidden');
                answerEl.classList.add('border-secondary');
                answerEl.classList.remove('border-primary');
                return;
            }
            
            // æ£€æŸ¥ç­”æ¡ˆæ˜¯å¦æ­£ç¡®
            if (userAnswer === currentAnswer) {
                // ç­”æ¡ˆæ­£ç¡®
                score++;
                scoreEl.textContent = score;
                feedbackEl.textContent = 'ğŸ‰ å¤ªæ£’äº†ï¼Œç­”å¯¹äº†ï¼ğŸ‰';
                feedbackEl.className = 'mt-4 text-xl font-bold text-success bounce-in';
                
                // æ·»åŠ æ˜Ÿæ˜ŸåŠ¨ç”»
                const starsContainer = document.createElement('div');
                starsContainer.className = 'fixed inset-0 pointer-events-none flex justify-center items-center z-50';
                for (let i = 0; i < 10; i++) {
                    const star = document.createElement('i');
                    star.className = `fa fa-star absolute text-accent text-2xl`;
                    star.style.left = `${Math.random() * 100}%`;
                    star.style.top = `${Math.random() * 100}%`;
                    star.style.opacity = '0';
                    star.style.animation = `float ${3 + Math.random() * 2}s ease-in-out infinite, fadeInOut 2s ease-in-out forwards`;
                    starsContainer.appendChild(star);
                }
                document.body.appendChild(starsContainer);
                setTimeout(() => {
                    document.body.removeChild(starsContainer);
                }, 2000);
                
                // æ˜¾ç¤ºä¸‹ä¸€é¢˜æŒ‰é’®
                submitBtn.classList.add('hidden');
                nextBtn.classList.remove('hidden');
                
                // è‡ªåŠ¨åˆ‡æ¢åˆ°ä¸‹ä¸€é¢˜
                setTimeout(generateQuestion, 1500);
            } else {
                // ç­”æ¡ˆé”™è¯¯
                feedbackEl.textContent = 'å†è¯•ä¸€æ¬¡ï¼';
                feedbackEl.className = 'mt-4 text-xl font-bold text-secondary shake';
                feedbackEl.classList.remove('hidden');
                answerEl.classList.add('border-secondary');
                answerEl.classList.remove('border-primary');
                
                // æŠ–åŠ¨è¾“å…¥æ¡†
                answerEl.classList.add('shake');
                setTimeout(() => {
                    answerEl.classList.remove('shake');
                }, 500);
            }
        }

        // æ·»åŠ é”®ç›˜äº‹ä»¶ç›‘å¬
        answerEl.addEventListener('keydown', (e) => {
            if (e.key === 'Enter') {
                if (submitBtn.classList.contains('hidden')) {
                    generateQuestion();
                } else {
                    checkAnswer();
                }
            }
        });

        // æ·»åŠ è¾“å…¥äº‹ä»¶ç›‘å¬
        answerEl.addEventListener('input', () => {
            if (answerEl.classList.contains('border-secondary')) {
                answerEl.classList.remove('border-secondary');
                answerEl.classList.add('border-primary');
                feedbackEl.classList.add('hidden');
            }
        });

        // æ·»åŠ æŒ‰é’®äº‹ä»¶ç›‘å¬
        submitBtn.addEventListener('click', checkAnswer);
        nextBtn.addEventListener('click', generateQuestion);

        // æ·»åŠ æ·¡å…¥æ·¡å‡ºåŠ¨ç”»æ ·å¼
        const style = document.createElement('style');
        style.textContent = `
            @keyframes fadeInOut {
                0%, 100% { opacity: 0; }
                50% { opacity: 1; }
            }
        `;
        document.head.appendChild(style);

        // åˆå§‹åŒ–é¡µé¢
        generateQuestion();
    </script>
</body>
</html>